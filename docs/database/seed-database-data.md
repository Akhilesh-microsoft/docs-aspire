---
title: Seed data in a database using .NET Aspire
description: Learn about how to seed database data in .NET Aspire
ms.date: 2/20/2024
ms.topic: how-to
---

# Seed data in a database using .NET Aspire

In this article, you learn how to configure .NET Aspire apps to seed data in a database during app startup using volumes and scripts. This article explains how to seed data for common database technologies such as SQL Server, PostgreSQL and MySQL.

## When to seed data

Seeding data pre-populates the database with rows of data so that it's ready for testing via your app. For example, you may want to seed data for the following scenarios:

- Manually develop and test different features of your app against a meaningful set of data, such as a product catalog
- Run automated tests to verify that features behave a specific way with a given set of data

Manually seeding data is tedious and time consuming and should be automated when possible. With .NET Aspire, these goals can all be accomplished using volumes to run database scripts during startup. You can also seed your database using tools like Entity Framework Core.

## Understand containerized databases

By default, .NET Aspire database components rely on containerized databases, which creates the following challenges when trying to seed data:

- Containers are destroyed and recreated every time a .NET Aspire app restarts, which means by default you have to re-seed your database every time the app restarts. 
- Depending on your selected database technology, the new container instance may or may not create a default database, which means you might also have to create the database itself.
- The default database most likely will also not have the correct name or schema for your specific app.

.NET Aspire enables you to resolve these challenges using volumes and a few configurations.

## Understand volumes

Volumes are the recommended way to persist and seed data generated by containers and supported on both Windows and Linux. Volumes can store data from multiple containers at a time, offer high performance and are easy to back up or migrate. With .NET Aspire, you configure a volume for each resource container using the <xref:Aspire.Hosting.ContainerResourceBuilderExtensions.WithVolumeMount%2A?displayProperty=nameWithType> method, which accepts three parameters:

- **Source**: The source path of the volume, which is the physical location on the host.
- **Target**: The target path in the container of the data you want to persist.
- **VolumeMountType**: There are two types of volume mounts available:
  - **Named mounts**: Storage managed by docker that your containers can use to persist data.
  - **Bind mounts**: Files mounted from your host machine onto your container.

Consider the following volume configuration code from a _Program.cs_ file in a sample AppHost project:

```csharp
var sql = builder.AddSqlServerContainer("sql", sqlpassword)
    .WithVolumeMount("VolumeMount.sqlserver.data", "/var/opt/mssql", VolumeMountType.Named)
    .AddDatabase("sqldb");
```

In this example:

- `VolumeMount.sqlserver.data` sets where the volume will be stored on the host.
- `/var/opt/mssql` sets the path to the database files in the container.
- <xref:Aspire.Hosting.ApplicationModel.VolumeMountType.Named?displayProperty=nameWithType> sets a named volume that will persist across container life cycles.

## Seed data using database scripts

You can seed data in .NET Aspire apps by using database scripts that are configured to run during the container startup. Binding the script to the docker container entrypoint using the `.WithVolumeMount` method.

### [PostreSQL](#tab/postgresql)

:::code source="~/aspire-samples/samples/DatabaseContainers/DatabaseContainers.AppHost/Program.cs" range="3-12" :::

### [SQL Server](#tab/sql-server)

:::code source="~/aspire-samples/samples/DatabaseContainers/DatabaseContainers.AppHost/Program.cs" range="25-35" :::

### [MySQL](#tab/mysql)

:::code source="~/aspire-samples/samples/DatabaseContainers/DatabaseContainers.AppHost/Program.cs" range="14-23" :::

---

## Next steps

You can apply the volume concepts in the preceding code to a variety of services, including seeding a database with data that will persist across app launches. Try combining these techniques with the resource implementations demonstrated in the following tutorials:

- [Tutorial: Connect an ASP.NET Core app to .NET Aspire storage components](../storage/azure-storage-components.md)
- [Tutorial: Connect an ASP.NET Core app to SQL Server using .NET Aspire and Entity Framework Core](../database/sql-server-components.md)
- [.NET Aspire orchestration overview](../fundamentals/app-host-overview.md)
